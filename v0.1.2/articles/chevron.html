<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="chevron">
<title>Introduction to Chevron • chevron</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to Chevron">
<meta property="og:description" content="chevron">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><link rel="stylesheet" href="../consent.css">
<script src="../consent.js" type="text/javascript" charset="utf-8"></script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">chevron</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.2</small>

    <div style="width: 140px; margin-left: 0.5rem;"> <small class="nav-text text-muted me-auto">part of</small> <img src="https://github.com/insightsengineering/hex-stickers/blob/main/PNG/nest.png?raw=true" alt="NEST" style="height: 30px;"><a href="https://pharmaverse.org/" class="external-link"><img src="https://github.com/insightsengineering/hex-stickers/blob/main/PNG/pharmaverse.png?raw=true" alt="pharmaverse" style="height: 28px;"></a> </div>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/chevron.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/index.html">Articles</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
<!-- start dropdown for versions --> <li class="nav-item dropdown">
        <a href="#" class="nav-link dropdown-toggle"
          data-bs-toggle="dropdown" role="button"
          aria-expanded="false" aria-haspopup="true"
          id="dropdown-versions">Versions</a> <div class="dropdown-menu" aria-labelledby="dropdown-versions"> <a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/chevron/main">main</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/chevron/latest-tag">latest-tag</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/chevron/release-candidate">release-candidate</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/chevron/v0.2.0-rc1">v0.2.0-rc1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/chevron/v0.1.5-rc1">v0.1.5-rc1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/chevron/v0.1.4-rc1">v0.1.4-rc1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/chevron/v0.2.0">v0.2.0</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/chevron/v0.1.4">v0.1.4</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/chevron/v0.1.3">v0.1.3</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/chevron/v0.1.2">v0.1.2</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/chevron/v0.1.1">v0.1.1</a> </div></li>
<!-- end dropdown for versions -->
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/insightsengineering/chevron">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Introduction to Chevron</h1>
                        <h4 data-toc-skip class="author">Adrian
Waddell</h4>
            
            <h4 data-toc-skip class="date">2022-11-04</h4>
      
      
      <div class="d-none name"><code>chevron.Rmd</code></div>
    </div>

    
    
<div class="section level3">
<h3 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h3>
<p>The <code>chevron</code> R package provides functions to produce
standard tables, listings and graphs (TLGs) used to analyze and report
clinical trials data. The ensemble of function used to produce a
particular output are stored in an <code>chevron_tlg</code> object of
class <code>S4</code> also called <em>pipelines</em>. Each standard
output is associated with one <em>pipeline</em>. They contain the
following objects: * A <code>main</code> function also refereed to as
<em>TLG-function</em>. * A <code>preprocess</code> function. * A
<code>postprocess</code> function * A <code>adam_dataset</code>
character vector of the name of the <code>AdAM</code> datasets required
to create the output.</p>
<div class="section level4">
<h4 id="tlg-functions">
<em>TLG-functions</em><a class="anchor" aria-label="anchor" href="#tlg-functions"></a>
</h4>
<p>The <em>TLG-functions</em> in <code>chevron</code> use other packages
to produce the final outputs, for example <code>rtables</code> and
<code>tern</code> are used to create listings and tables, and
<code>ggplot2</code>, <code>lattice</code>, and <code>grid</code> are
used to create graphs.</p>
<p><em>TLG-functions</em> in <code>chevron</code> such as
<code>dmt01_1_main</code>, <code>aet02_1_main</code>,
<code>aet02_2_main</code> have the following properties:</p>
<ol style="list-style-type: decimal">
<li>they produce a narrow defined output (currently standards in Roche
<code>GDS</code>). Note, that the naming convention
<code>&lt;gds template id&gt;_&lt;i&gt;_main</code> indicates that a
Roche <code>GDS</code> defined standard may have different
implementations. Or, alternatively, a <code>GDS</code> template id can
be regarded as a <em>guideline</em> and the function name in
<code>chevron</code> as a <em>standard</em>.</li>
<li>have very few arguments to modify the standard. Generally, arguments
may change the structure of the table (arm variable, which variables are
summarized) but not parameterize the cell content (i.e. alpha-level for
p-value).</li>
<li>have always the first argument <code>adam_db</code> which is the
collection of <code>ADaM</code> datasets (<code>ADSL</code>,
<code>ADAE</code>, <code>ADRS</code>, etc.). Please read the <em>The
<code>adam_db</code> Argument</em> vignette in this package for more
details.</li>
<li>have a <code>.study</code> argument, read the <em>The .study
argument</em> vignette for more detail.</li>
<li>have the <code>...</code> argument to facilitate their incorporation
in a pipeline.</li>
</ol>
</div>
<div class="section level4">
<h4 id="pre-processing">
<em>pre-processing</em><a class="anchor" aria-label="anchor" href="#pre-processing"></a>
</h4>
<p>The <em>pre-process</em> functions in <code>chevron</code> use
<code>dm</code> and <code>dunlin</code> packages to process
<code>dm</code> object and turn them into a suitable input for
<em>TLG-functions</em>. The pre-processing step typically includes
checks that will ensure that the <code>dm</code> input can be later
processed by the <em>TLG-functions</em>.</p>
<p><em>pre-process</em> in chevron such as <code>dmt01_1_pre</code>,
<code>aet02_1_pre</code>, <code>aet02_2_pre</code> have the following
properties: 1. they return a <code>dm</code> object amenable to
processing by a <em>TLG-functions</em> or return rapidly an
understandable error message. 1. have very few arguments to modify the
standard. 1. have always the first argument <code>adam_db</code> which
is the collection of <code>ADaM</code> datasets (<code>ADSL</code>,
<code>ADAE</code>, <code>ADRS</code>, etc.). Please read the <em>The
<code>adam_db</code> Argument</em> vignette in this package for more
details. 1. can have the <code>.study</code> argument and other argument
of the corresponding <em>TLG-functions</em> as they may inform the
function on the column that will be required and facilitate the checking
process. 1. have the <code>...</code> argument to facilitate their
incorporation in a pipeline.</p>
</div>
<div class="section level4">
<h4 id="post-processing">
<em>post-processing</em>`<a class="anchor" aria-label="anchor" href="#post-processing"></a>
</h4>
<p>Post-processing function are not provided but can be created by the
user.</p>
</div>
<div class="section level4">
<h4 id="adam_dataset">
<em><code>adam_dataset</code></em><a class="anchor" aria-label="anchor" href="#adam_dataset"></a>
</h4>
<p>The <code>adam_dataset</code> stores the name(s) of the data sets in
the <code>AdAM</code> <code>dm</code> object that will be used in the
process. This information is important when the <em>pipeline</em> is
interfaced with other processes from the <code>chevron</code> ecosystem
of packages such as <code>citril</code>.</p>
</div>
</div>
<div class="section level3">
<h3 id="example-aet02">Example <code>AET02</code><a class="anchor" aria-label="anchor" href="#example-aet02"></a>
</h3>
<p>For example, the <code>GDS</code> template <code>aet02</code> is
implemented in <code>chevron</code> with the <em>pipeline</em> that have
the name <code>aet02_*</code>. The object documentation which is
accessible with the <code>help</code> function,
e.g. <code><a href="../reference/aet02_1.html">help('aet02_1')</a></code> documents what is particular in the
<code>_1</code> implementation.</p>
<p>We first define the data and put it in a <code>dm</code> object, you
can find more details about this in the <em><code>adam_db</code></em>
vignette.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://cynkra.github.io/dm/" class="external-link">dm</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dm'</span></span>
<span><span class="co">#&gt; The following object is masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">scda</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span></span>
<span><span class="va">syn_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/scda/man/synthetic_cdisc_data.html" class="external-link">synthetic_cdisc_data</a></span><span class="op">(</span><span class="st">"latest"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">adam_study_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://cynkra.github.io/dm/reference/dm.html" class="external-link">dm</a></span><span class="op">(</span>adsl <span class="op">=</span> <span class="va">syn_data</span><span class="op">$</span><span class="va">adsl</span>, adae <span class="op">=</span> <span class="va">syn_data</span><span class="op">$</span><span class="va">adae</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://cynkra.github.io/dm/reference/dm_add_pk.html" class="external-link">dm_add_pk</a></span><span class="op">(</span><span class="va">adsl</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"USUBJID"</span>, <span class="st">"STUDYID"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://cynkra.github.io/dm/reference/dm_add_fk.html" class="external-link">dm_add_fk</a></span><span class="op">(</span><span class="va">adae</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"USUBJID"</span>, <span class="st">"STUDYID"</span><span class="op">)</span>, ref_table <span class="op">=</span> <span class="st">"adsl"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://cynkra.github.io/dm/reference/dm_add_pk.html" class="external-link">dm_add_pk</a></span><span class="op">(</span><span class="va">adae</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"USUBJID"</span>, <span class="st">"STUDYID"</span>, <span class="st">"ASTDTM"</span>, <span class="st">"AETERM"</span>, <span class="st">"AESEQ"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://cynkra.github.io/dm/reference/deprecated.html" class="external-link">validate_dm</a></span><span class="op">(</span><span class="va">adam_study_data</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: `validate_dm()` was deprecated in dm 0.3.0.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Please use `dm_validate()` instead.</span></span></code></pre></div>
<p>A the <code>aet02_1</code> output is then created as follows:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">chevron</span><span class="op">)</span></span>
<span><span class="co">#&gt; Registered S3 method overwritten by 'tern':</span></span>
<span><span class="co">#&gt;   method   from </span></span>
<span><span class="co">#&gt;   tidy.glm broom</span></span>
<span><span class="fu"><a href="../reference/run.html">run</a></span><span class="op">(</span><span class="va">aet02_1</span>, <span class="va">adam_study_data</span><span class="op">)</span></span>
<span><span class="co">#&gt; MedDRA System Organ Class                                     A: Drug X    B: Placebo   C: Combination</span></span>
<span><span class="co">#&gt;   MedDRA Preferred Term                                        (N=134)      (N=134)        (N=132)    </span></span>
<span><span class="co">#&gt; ——————————————————————————————————————————————————————————————————————————————————————————————————————</span></span>
<span><span class="co">#&gt; Total number of patients with at least one adverse event     100 (74.6%)   98 (73.1%)     103 (78%)   </span></span>
<span><span class="co">#&gt; Overall total number of events                                   502          480            604      </span></span>
<span><span class="co">#&gt; cl A.1                                                                                                </span></span>
<span><span class="co">#&gt;   Total number of patients with at least one adverse event   68 (50.7%)    58 (43.3%)     76 (57.6%)  </span></span>
<span><span class="co">#&gt;   Total number of events                                         115           99            137      </span></span>
<span><span class="co">#&gt;   dcd A.1.1.1.1                                              45 (33.6%)    31 (23.1%)     52 (39.4%)  </span></span>
<span><span class="co">#&gt;   dcd A.1.1.1.2                                              41 (30.6%)    39 (29.1%)     42 (31.8%)  </span></span>
<span><span class="co">#&gt; cl B.2                                                                                                </span></span>
<span><span class="co">#&gt;   Total number of patients with at least one adverse event   62 (46.3%)    56 (41.8%)     74 (56.1%)  </span></span>
<span><span class="co">#&gt;   Total number of events                                         102          106            127      </span></span>
<span><span class="co">#&gt;   dcd B.2.2.3.1                                              38 (28.4%)    40 (29.9%)     45 (34.1%)  </span></span>
<span><span class="co">#&gt;   dcd B.2.1.2.1                                              39 (29.1%)    34 (25.4%)     46 (34.8%)  </span></span>
<span><span class="co">#&gt; cl D.1                                                                                                </span></span>
<span><span class="co">#&gt;   Total number of patients with at least one adverse event   64 (47.8%)    54 (40.3%)     68 (51.5%)  </span></span>
<span><span class="co">#&gt;   Total number of events                                         106           84            114      </span></span>
<span><span class="co">#&gt;   dcd D.1.1.1.1                                              42 (31.3%)    32 (23.9%)     46 (34.8%)  </span></span>
<span><span class="co">#&gt;   dcd D.1.1.4.2                                              38 (28.4%)    34 (25.4%)     40 (30.3%)  </span></span>
<span><span class="co">#&gt; cl D.2                                                                                                </span></span>
<span><span class="co">#&gt;   Total number of patients with at least one adverse event   37 (27.6%)    46 (34.3%)     50 (37.9%)  </span></span>
<span><span class="co">#&gt;   Total number of events                                         49            57             65      </span></span>
<span><span class="co">#&gt;   dcd D.2.1.5.3                                              37 (27.6%)    46 (34.3%)     50 (37.9%)  </span></span>
<span><span class="co">#&gt; cl C.2                                                                                                </span></span>
<span><span class="co">#&gt;   Total number of patients with at least one adverse event   28 (20.9%)    36 (26.9%)     48 (36.4%)  </span></span>
<span><span class="co">#&gt;   Total number of events                                         39            40             57      </span></span>
<span><span class="co">#&gt;   dcd C.2.1.2.1                                              28 (20.9%)    36 (26.9%)     48 (36.4%)  </span></span>
<span><span class="co">#&gt; cl B.1                                                                                                </span></span>
<span><span class="co">#&gt;   Total number of patients with at least one adverse event   38 (28.4%)    37 (27.6%)     36 (27.3%)  </span></span>
<span><span class="co">#&gt;   Total number of events                                         44            43             50      </span></span>
<span><span class="co">#&gt;   dcd B.1.1.1.1                                              38 (28.4%)    37 (27.6%)     36 (27.3%)  </span></span>
<span><span class="co">#&gt; cl C.1                                                                                                </span></span>
<span><span class="co">#&gt;   Total number of patients with at least one adverse event   36 (26.9%)    34 (25.4%)     36 (27.3%)  </span></span>
<span><span class="co">#&gt;   Total number of events                                         47            51             54      </span></span>
<span><span class="co">#&gt;   dcd C.1.1.1.3                                              36 (26.9%)    34 (25.4%)     36 (27.3%)</span></span></code></pre></div>
<p>The function associated with a particular slot can be retrieved with
the corresponding method: <code>get_main</code>,
<code>get_preprocess</code>and <code>get_postprocess</code></p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_main.html">get_main</a></span><span class="op">(</span><span class="va">aet02_1</span><span class="op">)</span></span>
<span><span class="co">#&gt; function (adam_db, armvar = .study$actualarm, lbl_overall = .study$lbl_overall, </span></span>
<span><span class="co">#&gt;     prune_0 = TRUE, deco = std_deco("AET02"), .study = list(actualarm = "ACTARM", </span></span>
<span><span class="co">#&gt;         lbl_overall = NULL)) </span></span>
<span><span class="co">#&gt; {</span></span>
<span><span class="co">#&gt;     dbsel &lt;- get_db_data(adam_db, "adsl", "adae")</span></span>
<span><span class="co">#&gt;     lyt &lt;- aet02_1_lyt(armvar = armvar, lbl_overall = lbl_overall, </span></span>
<span><span class="co">#&gt;         deco = deco)</span></span>
<span><span class="co">#&gt;     tbl &lt;- build_table(lyt, dbsel$adae, alt_counts_df = dbsel$adsl)</span></span>
<span><span class="co">#&gt;     if (prune_0) {</span></span>
<span><span class="co">#&gt;         tbl &lt;- smart_prune(tbl)</span></span>
<span><span class="co">#&gt;     }</span></span>
<span><span class="co">#&gt;     tbl_sorted &lt;- tbl %&gt;% sort_at_path(path = c("AEBODSYS"), </span></span>
<span><span class="co">#&gt;         scorefun = cont_n_allcols) %&gt;% sort_at_path(path = c("AEBODSYS", </span></span>
<span><span class="co">#&gt;         "*", "AEDECOD"), scorefun = score_occurrences)</span></span>
<span><span class="co">#&gt;     tbl_sorted</span></span>
<span><span class="co">#&gt; }</span></span>
<span><span class="co">#&gt; &lt;bytecode: 0x560bafe5a480&gt;</span></span>
<span><span class="co">#&gt; &lt;environment: namespace:chevron&gt;</span></span></code></pre></div>
<p>These are standard function that can be used on their own</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_preprocess.html">get_preprocess</a></span><span class="op">(</span><span class="va">aet02_1</span><span class="op">)</span><span class="op">(</span><span class="va">adam_study_data</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #FFAFFF;">──</span> <span style="color: #FFAFFF;">Metadata</span> <span style="color: #FFAFFF;">────────────────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; Tables: `adsl`, `adae`</span></span>
<span><span class="co">#&gt; Columns: 148</span></span>
<span><span class="co">#&gt; Primary keys: 2</span></span>
<span><span class="co">#&gt; Foreign keys: 1</span></span>
<span></span>
<span><span class="co"># or</span></span>
<span><span class="va">foo</span> <span class="op">&lt;-</span> <span class="va">aet02_1</span><span class="op">@</span><span class="va">preprocess</span></span>
<span><span class="fu">foo</span><span class="op">(</span><span class="va">adam_study_data</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #FFAFFF;">──</span> <span style="color: #FFAFFF;">Metadata</span> <span style="color: #FFAFFF;">────────────────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; Tables: `adsl`, `adae`</span></span>
<span><span class="co">#&gt; Columns: 148</span></span>
<span><span class="co">#&gt; Primary keys: 2</span></span>
<span><span class="co">#&gt; Foreign keys: 1</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="pipeline-customization">Pipeline customization<a class="anchor" aria-label="anchor" href="#pipeline-customization"></a>
</h2>
<p>In some instances it is useful to customize the pipeline, for
instance by changing the pre processing function. Be aware that you have
to think carefully about argument names and compatibility with
downstream functions.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">aet02_1</span><span class="op">@</span><span class="va">preprocess</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">adam_db</span><span class="op">)</span> <span class="va">adam_db</span></span>
<span><span class="fu"><a href="../reference/get_preprocess.html">get_preprocess</a></span><span class="op">(</span><span class="va">aet02_1</span><span class="op">)</span></span>
<span><span class="co">#&gt; function(adam_db) adam_db</span></span></code></pre></div>
<p>Note that this operation creates a local version of the pipeline. The
package version of the pipeline (accessible with
<code><a href="../reference/aet01_1.html">chevron::aet01_1</a></code>) remains unchanged.</p>
</div>
<div class="section level2">
<h2 id="custom-pipeline-creation">Custom Pipeline creation<a class="anchor" aria-label="anchor" href="#custom-pipeline-creation"></a>
</h2>
<p>To create a pipeline from scratch, use the provided constructor:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">my_pipeline</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/chevron_tlg-class.html">chevron_tlg</a></span><span class="op">(</span></span>
<span>  main <span class="op">=</span> <span class="va">aet02_1_main</span>,</span>
<span>  preprocess <span class="op">=</span> <span class="va">aet02_1_pre</span>,</span>
<span>  postprocess <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">tlg</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"Finished at"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="va">tlg</span></span>
<span>  <span class="op">}</span>,</span>
<span>  adam_datasets <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"adsl"</span>, <span class="st">"adae"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/run.html">run</a></span><span class="op">(</span><span class="va">my_pipeline</span>, <span class="va">adam_study_data</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Finished at 2022-11-04 20:02:32"</span></span>
<span><span class="co">#&gt; MedDRA System Organ Class                                     A: Drug X    B: Placebo   C: Combination</span></span>
<span><span class="co">#&gt;   MedDRA Preferred Term                                        (N=134)      (N=134)        (N=132)    </span></span>
<span><span class="co">#&gt; ——————————————————————————————————————————————————————————————————————————————————————————————————————</span></span>
<span><span class="co">#&gt; Total number of patients with at least one adverse event     100 (74.6%)   98 (73.1%)     103 (78%)   </span></span>
<span><span class="co">#&gt; Overall total number of events                                   502          480            604      </span></span>
<span><span class="co">#&gt; cl A.1                                                                                                </span></span>
<span><span class="co">#&gt;   Total number of patients with at least one adverse event   68 (50.7%)    58 (43.3%)     76 (57.6%)  </span></span>
<span><span class="co">#&gt;   Total number of events                                         115           99            137      </span></span>
<span><span class="co">#&gt;   dcd A.1.1.1.1                                              45 (33.6%)    31 (23.1%)     52 (39.4%)  </span></span>
<span><span class="co">#&gt;   dcd A.1.1.1.2                                              41 (30.6%)    39 (29.1%)     42 (31.8%)  </span></span>
<span><span class="co">#&gt; cl B.2                                                                                                </span></span>
<span><span class="co">#&gt;   Total number of patients with at least one adverse event   62 (46.3%)    56 (41.8%)     74 (56.1%)  </span></span>
<span><span class="co">#&gt;   Total number of events                                         102          106            127      </span></span>
<span><span class="co">#&gt;   dcd B.2.2.3.1                                              38 (28.4%)    40 (29.9%)     45 (34.1%)  </span></span>
<span><span class="co">#&gt;   dcd B.2.1.2.1                                              39 (29.1%)    34 (25.4%)     46 (34.8%)  </span></span>
<span><span class="co">#&gt; cl D.1                                                                                                </span></span>
<span><span class="co">#&gt;   Total number of patients with at least one adverse event   64 (47.8%)    54 (40.3%)     68 (51.5%)  </span></span>
<span><span class="co">#&gt;   Total number of events                                         106           84            114      </span></span>
<span><span class="co">#&gt;   dcd D.1.1.1.1                                              42 (31.3%)    32 (23.9%)     46 (34.8%)  </span></span>
<span><span class="co">#&gt;   dcd D.1.1.4.2                                              38 (28.4%)    34 (25.4%)     40 (30.3%)  </span></span>
<span><span class="co">#&gt; cl D.2                                                                                                </span></span>
<span><span class="co">#&gt;   Total number of patients with at least one adverse event   37 (27.6%)    46 (34.3%)     50 (37.9%)  </span></span>
<span><span class="co">#&gt;   Total number of events                                         49            57             65      </span></span>
<span><span class="co">#&gt;   dcd D.2.1.5.3                                              37 (27.6%)    46 (34.3%)     50 (37.9%)  </span></span>
<span><span class="co">#&gt; cl C.2                                                                                                </span></span>
<span><span class="co">#&gt;   Total number of patients with at least one adverse event   28 (20.9%)    36 (26.9%)     48 (36.4%)  </span></span>
<span><span class="co">#&gt;   Total number of events                                         39            40             57      </span></span>
<span><span class="co">#&gt;   dcd C.2.1.2.1                                              28 (20.9%)    36 (26.9%)     48 (36.4%)  </span></span>
<span><span class="co">#&gt; cl B.1                                                                                                </span></span>
<span><span class="co">#&gt;   Total number of patients with at least one adverse event   38 (28.4%)    37 (27.6%)     36 (27.3%)  </span></span>
<span><span class="co">#&gt;   Total number of events                                         44            43             50      </span></span>
<span><span class="co">#&gt;   dcd B.1.1.1.1                                              38 (28.4%)    37 (27.6%)     36 (27.3%)  </span></span>
<span><span class="co">#&gt; cl C.1                                                                                                </span></span>
<span><span class="co">#&gt;   Total number of patients with at least one adverse event   36 (26.9%)    34 (25.4%)     36 (27.3%)  </span></span>
<span><span class="co">#&gt;   Total number of events                                         47            51             54      </span></span>
<span><span class="co">#&gt;   dcd C.1.1.1.3                                              36 (26.9%)    34 (25.4%)     36 (27.3%)</span></span></code></pre></div>
<p>Note that to ensure the correct execution of the <code>run</code>
function, the name of the first argument of the <code>main</code>
function must be <code>adam_db</code>; the input <code>dm</code> object
to pre-process. The name of the first argument of the
<code>preprocess</code> function must be <code>adam_db</code>; the input
<code>dm</code> object to create <code>TLG</code> output and finally,
the name of the first argument of the <code>postprocess</code> function
must be <code>TLG</code>, the input <code>TableTree</code> object to
post-process. Validation criteria enforce these rules upon creation of a
<em>pipeline</em>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="nest">
  <p>chevron is a part of the <strong>NEST</strong> and <a href="https://pharmaverse.org/" class="external-link"><strong>pharmaverse</strong></a>.</p>
</div>
<script type="text/javascript" src="../analytics.js"></script></footer>
</div>

  

  

  </body>
</html>
