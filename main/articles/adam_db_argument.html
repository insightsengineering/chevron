<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="chevron">
<title>The `adam_db` argument • chevron</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="The `adam_db` argument">
<meta property="og:description" content="chevron">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><link rel="stylesheet" href="../consent.css">
<script src="../consent.js" type="text/javascript" charset="utf-8"></script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">chevron</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0.9029</small>

    <div style="width: 140px; margin-left: 0.5rem;"> <small class="nav-text text-muted me-auto">part of</small> <img src="https://github.com/insightsengineering/hex-stickers/blob/main/PNG/nest.png?raw=true" alt="NEST" style="height: 30px;"><a href="https://pharmaverse.org/" class="external-link"><img src="https://github.com/insightsengineering/hex-stickers/blob/main/PNG/pharmaverse.png?raw=true" alt="pharmaverse" style="height: 28px;"></a> </div>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/chevron.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../articles/index.html">Articles</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
<!-- start dropdown for versions --> <li class="nav-item dropdown">
        <a href="#" class="nav-link dropdown-toggle"
          data-bs-toggle="dropdown" role="button"
          aria-expanded="false" aria-haspopup="true"
          id="dropdown-versions">Versions</a> <div class="dropdown-menu" aria-labelledby="dropdown-versions"> <a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/chevron/main">main</a> </div></li>
<!-- end dropdown for versions -->
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/insightsengineering/chevron">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="adam_db_argument_files/htmlwidgets-1.5.4/htmlwidgets.js"></script><script src="adam_db_argument_files/viz-1.8.2/viz.js"></script><link href="adam_db_argument_files/DiagrammeR-styles-0.2/styles.css" rel="stylesheet">
<script src="adam_db_argument_files/grViz-binding-1.0.9/grViz.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>The `adam_db` argument</h1>
            
            <h4 data-toc-skip class="date">2022-09-28</h4>
      
      
      <div class="d-none name"><code>adam_db_argument.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>We have decided to use the <code>dm</code> package in
<code>chevron</code> to model the data relations of the
<code>CDISC</code> <code>ADaM</code> datasets. In this vignette we
introduce how we intend to use <code>ADaM</code> data in a relational
model, in R with <code>dm</code>. Note that <code>dm</code> can be
connected to a database.</p>
</div>
<div class="section level2">
<h2 id="sample-data">Sample Data<a class="anchor" aria-label="anchor" href="#sample-data"></a>
</h2>
<p>We remove the <code>ADSL</code> variables in the database of the
non-<code>ADSL</code> datasets and merge the <code>ADSL</code> variables
back as needed.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">chevron</span><span class="op">)</span></span>
<span><span class="co">#&gt; Registered S3 method overwritten by 'tern':</span></span>
<span><span class="co">#&gt;   method   from </span></span>
<span><span class="co">#&gt;   tidy.glm broom</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://cynkra.github.io/dm/" class="external-link">dm</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dm'</span></span>
<span><span class="co">#&gt; The following object is masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter</span></span>
<span></span>
<span><span class="va">syn_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/syn_test_data.html">syn_test_data</a></span><span class="op">(</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"adsl"</span>, <span class="st">"adae"</span>, <span class="st">"adlb"</span>, <span class="st">"adrs"</span>, <span class="st">"adsub"</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="va">drop_adsl_vars</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">df</span>, <span class="va">adsl</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">df</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"USUBJID"</span>, <span class="st">"STUDYID"</span>, <span class="fu"><a href="https://rdrr.io/r/base/sets.html" class="external-link">setdiff</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">adsl</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">dbl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>adsl <span class="op">=</span> <span class="va">syn_data</span><span class="op">$</span><span class="va">adsl</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">syn_data</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span>, <span class="va">drop_adsl_vars</span>, adsl <span class="op">=</span> <span class="va">syn_data</span><span class="op">$</span><span class="va">adsl</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">### Define primary and foreign keys</span></span>
<span><span class="va">adam_study_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://cynkra.github.io/dm/reference/dm.html" class="external-link">new_dm</a></span><span class="op">(</span><span class="va">dbl</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://cynkra.github.io/dm/reference/dm_add_pk.html" class="external-link">dm_add_pk</a></span><span class="op">(</span><span class="va">adsl</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"USUBJID"</span>, <span class="st">"STUDYID"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://cynkra.github.io/dm/reference/dm_add_fk.html" class="external-link">dm_add_fk</a></span><span class="op">(</span><span class="va">adae</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"USUBJID"</span>, <span class="st">"STUDYID"</span><span class="op">)</span>, ref_table <span class="op">=</span> <span class="st">"adsl"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://cynkra.github.io/dm/reference/dm_add_pk.html" class="external-link">dm_add_pk</a></span><span class="op">(</span><span class="va">adae</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"USUBJID"</span>, <span class="st">"STUDYID"</span>, <span class="st">"ASTDTM"</span>, <span class="st">"AETERM"</span>, <span class="st">"AESEQ"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://cynkra.github.io/dm/reference/dm_add_fk.html" class="external-link">dm_add_fk</a></span><span class="op">(</span><span class="va">adlb</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"USUBJID"</span>, <span class="st">"STUDYID"</span><span class="op">)</span>, ref_table <span class="op">=</span> <span class="st">"adsl"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://cynkra.github.io/dm/reference/dm_add_pk.html" class="external-link">dm_add_pk</a></span><span class="op">(</span><span class="va">adlb</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"STUDYID"</span>, <span class="st">"USUBJID"</span>, <span class="st">"PARAMCD"</span>, <span class="st">"BASETYPE"</span>, <span class="st">"AVISITN"</span>,</span>
<span>    <span class="st">"ATPTN"</span>, <span class="st">"DTYPE"</span>, <span class="st">"ADTM"</span>, <span class="st">"LBSEQ"</span>, <span class="st">"ASPID"</span></span>
<span>  <span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://cynkra.github.io/dm/reference/dm_add_fk.html" class="external-link">dm_add_fk</a></span><span class="op">(</span><span class="va">adrs</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"USUBJID"</span>, <span class="st">"STUDYID"</span><span class="op">)</span>, ref_table <span class="op">=</span> <span class="st">"adsl"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://cynkra.github.io/dm/reference/dm_add_pk.html" class="external-link">dm_add_pk</a></span><span class="op">(</span><span class="va">adrs</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"STUDYID"</span>, <span class="st">"USUBJID"</span>, <span class="st">"PARAMCD"</span>, <span class="st">"AVISITN"</span>, <span class="st">"ADTM"</span>, <span class="st">"RSSEQ"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://cynkra.github.io/dm/reference/dm_add_fk.html" class="external-link">dm_add_fk</a></span><span class="op">(</span><span class="va">adsub</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"USUBJID"</span>, <span class="st">"STUDYID"</span><span class="op">)</span>, ref_table <span class="op">=</span> <span class="st">"adsl"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://cynkra.github.io/dm/reference/dm_add_pk.html" class="external-link">dm_add_pk</a></span><span class="op">(</span><span class="va">adsub</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"USUBJID"</span>, <span class="st">"STUDYID"</span>, <span class="st">"PARAMCD"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://cynkra.github.io/dm/reference/deprecated.html" class="external-link">validate_dm</a></span><span class="op">(</span><span class="va">adam_study_data</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: `validate_dm()` was deprecated in dm 0.3.0.</span></span>
<span><span class="co">#&gt; Please use `dm_validate()` instead.</span></span></code></pre></div>
<p>Note that the keys are defined in the data analysis plan at
Roche.</p>
</div>
<div class="section level2">
<h2 id="work-with-dm-object">Work With <code>dm</code> Object<a class="anchor" aria-label="anchor" href="#work-with-dm-object"></a>
</h2>
<p>List the keys</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">dm</span><span class="fu">::</span><span class="fu"><a href="https://cynkra.github.io/dm/reference/dm_get_all_fks.html" class="external-link">dm_get_all_fks</a></span><span class="op">(</span><span class="va">adam_study_data</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 4 × 5</span></span></span>
<span><span class="co">#&gt;   child_table child_fk_cols    parent_table parent_key_cols  on_delete</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;keys&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;keys&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> adae        USUBJID, STUDYID adsl         USUBJID, STUDYID no_action</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> adlb        USUBJID, STUDYID adsl         USUBJID, STUDYID no_action</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> adrs        USUBJID, STUDYID adsl         USUBJID, STUDYID no_action</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> adsub       USUBJID, STUDYID adsl         USUBJID, STUDYID no_action</span></span>
<span><span class="fu">dm</span><span class="fu">::</span><span class="fu"><a href="https://cynkra.github.io/dm/reference/dm_get_all_pks.html" class="external-link">dm_get_all_pks</a></span><span class="op">(</span><span class="va">adam_study_data</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 2</span></span></span>
<span><span class="co">#&gt;   table pk_col                        </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;keys&gt;</span>                        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> adsl  USUBJID, STUDYID              </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> adae  USUBJID, STUDYID, … (5 total) </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> adlb  STUDYID, USUBJID, … (10 total)</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> adrs  STUDYID, USUBJID, … (6 total) </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> adsub USUBJID, STUDYID, PARAMCD</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">adam_study_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://cynkra.github.io/dm/reference/dm_draw.html" class="external-link">dm_draw</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div id="htmlwidget-cc7ec04199a26bd89592" style="width:700px;height:432.632880098888px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-cc7ec04199a26bd89592">{"x":{"diagram":"#data_model\ndigraph {\ngraph [rankdir=LR tooltip=\"Data Model\" ]\n\nnode [margin=0 fontcolor = \"#444444\" ]\n\nedge [color = \"#555555\", arrowsize = 1, ]\n\npack=true\npackmode= \"node\"\n\n  \"adae\" [id = \"adae\", label = <<TABLE ALIGN=\"LEFT\" BORDER=\"1\" CELLBORDER=\"0\" CELLSPACING=\"0\" COLOR=\"#555555\">\n    <TR>\n      <TD COLSPAN=\"1\" BGCOLOR=\"#EFEBDD\" BORDER=\"0\"><FONT COLOR=\"#000000\">adae<\/FONT>\n<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\" PORT=\"USUBJID, STUDYID, ASTDTM, AETERM, AESEQ\"><U>USUBJID, STUDYID, ASTDTM, AETERM, AESEQ<\/U><\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\" PORT=\"USUBJID, STUDYID\">USUBJID, STUDYID<\/TD>\n    <\/TR>\n  <\/TABLE>>, shape = \"plaintext\"] \n\n  \"adlb\" [id = \"adlb\", label = <<TABLE ALIGN=\"LEFT\" BORDER=\"1\" CELLBORDER=\"0\" CELLSPACING=\"0\" COLOR=\"#555555\">\n    <TR>\n      <TD COLSPAN=\"1\" BGCOLOR=\"#EFEBDD\" BORDER=\"0\"><FONT COLOR=\"#000000\">adlb<\/FONT>\n<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\" PORT=\"STUDYID, USUBJID, PARAMCD, BASETYPE, AVISITN, ATPTN, DTYPE, ADTM, LBSEQ, ASPID\"><U>STUDYID, USUBJID, PARAMCD, BASETYPE, AVISITN, ATPTN, DTYPE, ADTM, LBSEQ, ASPID<\/U><\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\" PORT=\"USUBJID, STUDYID\">USUBJID, STUDYID<\/TD>\n    <\/TR>\n  <\/TABLE>>, shape = \"plaintext\"] \n\n  \"adrs\" [id = \"adrs\", label = <<TABLE ALIGN=\"LEFT\" BORDER=\"1\" CELLBORDER=\"0\" CELLSPACING=\"0\" COLOR=\"#555555\">\n    <TR>\n      <TD COLSPAN=\"1\" BGCOLOR=\"#EFEBDD\" BORDER=\"0\"><FONT COLOR=\"#000000\">adrs<\/FONT>\n<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\" PORT=\"STUDYID, USUBJID, PARAMCD, AVISITN, ADTM, RSSEQ\"><U>STUDYID, USUBJID, PARAMCD, AVISITN, ADTM, RSSEQ<\/U><\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\" PORT=\"USUBJID, STUDYID\">USUBJID, STUDYID<\/TD>\n    <\/TR>\n  <\/TABLE>>, shape = \"plaintext\"] \n\n  \"adsl\" [id = \"adsl\", label = <<TABLE ALIGN=\"LEFT\" BORDER=\"1\" CELLBORDER=\"0\" CELLSPACING=\"0\" COLOR=\"#555555\">\n    <TR>\n      <TD COLSPAN=\"1\" BGCOLOR=\"#EFEBDD\" BORDER=\"0\"><FONT COLOR=\"#000000\">adsl<\/FONT>\n<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\" PORT=\"USUBJID, STUDYID\"><U>USUBJID, STUDYID<\/U><\/TD>\n    <\/TR>\n  <\/TABLE>>, shape = \"plaintext\"] \n\n  \"adsub\" [id = \"adsub\", label = <<TABLE ALIGN=\"LEFT\" BORDER=\"1\" CELLBORDER=\"0\" CELLSPACING=\"0\" COLOR=\"#555555\">\n    <TR>\n      <TD COLSPAN=\"1\" BGCOLOR=\"#EFEBDD\" BORDER=\"0\"><FONT COLOR=\"#000000\">adsub<\/FONT>\n<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\" PORT=\"USUBJID, STUDYID, PARAMCD\"><U>USUBJID, STUDYID, PARAMCD<\/U><\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\" PORT=\"USUBJID, STUDYID\">USUBJID, STUDYID<\/TD>\n    <\/TR>\n  <\/TABLE>>, shape = \"plaintext\"] \n\n\"adae\":\"USUBJID, STUDYID\"->\"adsl\":\"USUBJID, STUDYID\" [id=\"adae_1\"]\n\"adlb\":\"USUBJID, STUDYID\"->\"adsl\":\"USUBJID, STUDYID\" [id=\"adlb_1\"]\n\"adrs\":\"USUBJID, STUDYID\"->\"adsl\":\"USUBJID, STUDYID\" [id=\"adrs_1\"]\n\"adsub\":\"USUBJID, STUDYID\"->\"adsl\":\"USUBJID, STUDYID\" [id=\"adsub_1\"]\n}","config":{"engine":null,"options":null}},"evals":[],"jsHooks":[]}</script><div class="section level3">
<h3 id="subset-the-data">Subset the data<a class="anchor" aria-label="anchor" href="#subset-the-data"></a>
</h3>
<p>Further we can subset the data:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">db</span> <span class="op">&lt;-</span> <span class="va">adam_study_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://cynkra.github.io/dm/reference/dm_filter.html" class="external-link">dm_filter</a></span><span class="op">(</span><span class="va">adsl</span>, <span class="va">SEX</span> <span class="op">==</span> <span class="st">"F"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: The `table` argument of `dm_filter()` is deprecated as of dm 1.0.0.</span></span>
<span><span class="co">#&gt; `dm_filter()` now takes named filter expressions, the names correspond to the tables to be filtered. You no longer need to call `dm_apply_filters()` to materialize the filters.</span></span></code></pre></div>
<p>which adds the filter information to the <code>dm</code> object but
does not apply the filtering</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">db</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://cynkra.github.io/dm/reference/pull_tbl.html" class="external-link">pull_tbl</a></span><span class="op">(</span><span class="va">adsl</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">USUBJID</span>, <span class="va">STUDYID</span>, <span class="va">SEX</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 3</span></span></span>
<span><span class="co">#&gt;   USUBJID               STUDYID SEX  </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> AB12345-RUS-3-id-378  AB12345 F    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> AB12345-CHN-11-id-220 AB12345 F    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> AB12345-USA-1-id-45   AB12345 F    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> AB12345-USA-1-id-261  AB12345 F    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> AB12345-NGA-11-id-173 AB12345 F    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> AB12345-CHN-4-id-73   AB12345 F</span></span></code></pre></div>
<p>In order to get the filtered data one has to use the
<code><a href="https://cynkra.github.io/dm/reference/deprecated.html" class="external-link">dm_apply_filters()</a></code> function</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">db</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://cynkra.github.io/dm/reference/deprecated.html" class="external-link">dm_apply_filters</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://cynkra.github.io/dm/reference/pull_tbl.html" class="external-link">pull_tbl</a></span><span class="op">(</span><span class="va">adsl</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">USUBJID</span>, <span class="va">STUDYID</span>, <span class="va">SEX</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 3</span></span></span>
<span><span class="co">#&gt;   USUBJID               STUDYID SEX  </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> AB12345-RUS-3-id-378  AB12345 F    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> AB12345-CHN-11-id-220 AB12345 F    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> AB12345-USA-1-id-45   AB12345 F    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> AB12345-USA-1-id-261  AB12345 F    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> AB12345-NGA-11-id-173 AB12345 F    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> AB12345-CHN-4-id-73   AB12345 F</span></span></code></pre></div>
<p>or</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">db</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://cynkra.github.io/dm/reference/deprecated.html" class="external-link">dm_apply_filters_to_tbl</a></span><span class="op">(</span><span class="va">adsl</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">USUBJID</span>, <span class="va">STUDYID</span>, <span class="va">SEX</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 3</span></span></span>
<span><span class="co">#&gt;   USUBJID               STUDYID SEX  </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> AB12345-RUS-3-id-378  AB12345 F    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> AB12345-CHN-11-id-220 AB12345 F    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> AB12345-USA-1-id-45   AB12345 F    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> AB12345-USA-1-id-261  AB12345 F    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> AB12345-NGA-11-id-173 AB12345 F    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> AB12345-CHN-4-id-73   AB12345 F</span></span></code></pre></div>
<p>If one does not need the lazy filtering feature then one can also
zoom to the desired table and use <code>filter</code></p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">adam_study_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://cynkra.github.io/dm/reference/dm_zoom_to.html" class="external-link">dm_zoom_to</a></span><span class="op">(</span><span class="va">adsl</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">SEX</span> <span class="op">==</span> <span class="st">"F"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://cynkra.github.io/dm/reference/dm_zoom_to.html" class="external-link">dm_update_zoomed</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://cynkra.github.io/dm/reference/pull_tbl.html" class="external-link">pull_tbl</a></span><span class="op">(</span><span class="va">adsl</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">USUBJID</span>, <span class="va">STUDYID</span>, <span class="va">SEX</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 3</span></span></span>
<span><span class="co">#&gt;   USUBJID               STUDYID SEX  </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> AB12345-RUS-3-id-378  AB12345 F    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> AB12345-CHN-11-id-220 AB12345 F    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> AB12345-USA-1-id-45   AB12345 F    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> AB12345-USA-1-id-261  AB12345 F    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> AB12345-NGA-11-id-173 AB12345 F    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> AB12345-CHN-4-id-73   AB12345 F</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="mutate-data">Mutate Data<a class="anchor" aria-label="anchor" href="#mutate-data"></a>
</h3>
<p><code>dm</code> supports most of the <code>dplyr</code> verbs, for
example <code>mutate</code></p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">db</span> <span class="op">&lt;-</span> <span class="va">adam_study_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://cynkra.github.io/dm/reference/dm_zoom_to.html" class="external-link">dm_zoom_to</a></span><span class="op">(</span><span class="va">adsl</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>TEST <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">SEX</span>, <span class="st">"-"</span>, <span class="va">BWGHTSI</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://cynkra.github.io/dm/reference/dm_zoom_to.html" class="external-link">dm_update_zoomed</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">db</span><span class="op">$</span><span class="va">adsl</span><span class="op">$</span><span class="va">TEST</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span></span>
<span><span class="co">#&gt; [1] "M - 109.5" "M - 111.1" "F - 108.3" "F - 131.1" "M - 83.1"</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="dm-objects-in-chevron">
<code>dm</code> Objects in Chevron<a class="anchor" aria-label="anchor" href="#dm-objects-in-chevron"></a>
</h2>
<p>In <code>chevron</code> we use <code>dm</code> objects to combine all
data into one object. The <em>TLG-functions</em> and the functions
returned <code>std_filter</code> and <code>std_mutate</code> require a
<code>dm</code> object to the <code>adam_db</code> argument.</p>
<p><code>dm</code> objects also are useful to filter the data. For
example filtering for all females also subsets the other datasets as per
relation specification:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">adam_study_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://cynkra.github.io/dm/reference/dm_filter.html" class="external-link">dm_filter</a></span><span class="op">(</span><span class="va">adsl</span>, <span class="va">SEX</span> <span class="op">==</span> <span class="st">"F"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://cynkra.github.io/dm/reference/deprecated.html" class="external-link">dm_apply_filters</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://cynkra.github.io/dm/reference/deprecated.html" class="external-link">dm_join_to_tbl</a></span><span class="op">(</span><span class="va">adae</span>, <span class="va">adsl</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">USUBJID</span>, <span class="va">SEX</span>, <span class="va">AESEQ</span>, <span class="va">AETERM</span>, <span class="va">AESEQ</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: `dm_join_to_tbl()` was deprecated in dm 0.3.0.</span></span>
<span><span class="co">#&gt; Please use `dm_flatten_to_tbl()` instead.</span></span>
<span><span class="co">#&gt; Warning: The `table` argument of `dm_filter()` is deprecated as of dm 1.0.0.</span></span>
<span><span class="co">#&gt; `dm_filter()` now takes named filter expressions, the names correspond to the tables to be filtered. You no longer need to call `dm_apply_filters()` to materialize the filters.</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 4</span></span></span>
<span><span class="co">#&gt;   USUBJID              SEX   AESEQ AETERM       </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> AB12345-BRA-1-id-141 F         1 trm B.2.1.2.1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> AB12345-BRA-1-id-141 F         2 trm D.2.1.5.3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> AB12345-BRA-1-id-141 F         3 trm A.1.1.1.1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> AB12345-BRA-1-id-141 F         4 trm A.1.1.1.2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> AB12345-BRA-1-id-141 F         5 trm A.1.1.1.1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> AB12345-BRA-1-id-141 F         6 trm D.1.1.1.1</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="get-analysis-data">Get Analysis Data<a class="anchor" aria-label="anchor" href="#get-analysis-data"></a>
</h2>
<div class="section level3">
<h3 id="vertical-analysis-data">Vertical Analysis Data<a class="anchor" aria-label="anchor" href="#vertical-analysis-data"></a>
</h3>
<p>For standard outputs we do know which data and variables we need to
create a TLG.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">adam_study_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://cynkra.github.io/dm/reference/deprecated.html" class="external-link">dm_join_to_tbl</a></span><span class="op">(</span><span class="va">adae</span>, <span class="va">adsl</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">AESEQ</span>, <span class="va">ARM</span>, <span class="va">SEX</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: `dm_join_to_tbl()` was deprecated in dm 0.3.0.</span></span>
<span><span class="co">#&gt; Please use `dm_flatten_to_tbl()` instead.</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1,934 × 3</span></span></span>
<span><span class="co">#&gt;    AESEQ ARM            SEX  </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>     1 A: Drug X      M    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>     2 A: Drug X      M    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>     3 A: Drug X      M    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>     4 A: Drug X      M    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>     1 C: Combination F    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>     2 C: Combination F    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>     3 C: Combination F    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>     4 C: Combination F    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>     5 C: Combination F    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>     6 C: Combination F    </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 1,924 more rows</span></span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="horizontal">Horizontal<a class="anchor" aria-label="anchor" href="#horizontal"></a>
</h3>
<p>Add variables from <code>adsub</code> to <code>adsl</code>:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">adsub_wide</span> <span class="op">&lt;-</span> <span class="va">adam_study_data</span><span class="op">$</span><span class="va">adsub</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">PARAMCD</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"BWGHTSI"</span>, <span class="st">"BECOG"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">USUBJID</span>, <span class="va">STUDYID</span>, <span class="va">PARAMCD</span>, <span class="va">AVAL</span>, <span class="va">AVALU</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" class="external-link">pivot_wider</a></span><span class="op">(</span>names_from <span class="op">=</span> <span class="va">PARAMCD</span>, values_from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">AVAL</span>, <span class="va">AVALU</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://cynkra.github.io/dm/reference/deprecated.html" class="external-link">dm_add_tbl</a></span><span class="op">(</span><span class="va">adam_study_data</span>, <span class="va">adsub_wide</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://cynkra.github.io/dm/reference/dm_add_fk.html" class="external-link">dm_add_fk</a></span><span class="op">(</span><span class="va">adsub_wide</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"USUBJID"</span>, <span class="st">"STUDYID"</span><span class="op">)</span>, ref_table <span class="op">=</span> <span class="st">"adsl"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://cynkra.github.io/dm/reference/dm_add_pk.html" class="external-link">dm_add_pk</a></span><span class="op">(</span><span class="va">adsub_wide</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"USUBJID"</span>, <span class="st">"STUDYID"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://cynkra.github.io/dm/reference/deprecated.html" class="external-link">dm_join_to_tbl</a></span><span class="op">(</span><span class="va">adsl</span>, <span class="va">adsub_wide</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: `dm_join_to_tbl()` was deprecated in dm 0.3.0.</span></span>
<span><span class="co">#&gt; Please use `dm_flatten_to_tbl()` instead.</span></span>
<span><span class="co">#&gt; Warning: `dm_add_tbl()` was deprecated in dm 1.0.0.</span></span>
<span><span class="co">#&gt; Please use `dm()` instead.</span></span>
<span><span class="co">#&gt; Use `.name_repair = "unique"` if necessary.</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 400 × 49</span></span></span>
<span><span class="co">#&gt;    USUBJID     STUDYID AVAL_…¹ AVAL_…² AVALU…³ AVALU…⁴ SUBJID SITEID   AGE SEX  </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> AB12345-BR… AB12345    62.5       3 kg      <span style="color: #949494;">""</span>      id-105 BRA-1     38 M    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> AB12345-BR… AB12345    98.8       3 kg      <span style="color: #949494;">""</span>      id-134 BRA-1     47 M    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> AB12345-BR… AB12345    49.6       1 kg      <span style="color: #949494;">""</span>      id-141 BRA-1     35 F    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> AB12345-BR… AB12345   162.        3 kg      <span style="color: #949494;">""</span>      id-236 BRA-1     32 M    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> AB12345-BR… AB12345   105.        2 kg      <span style="color: #949494;">""</span>      id-265 BRA-1     25 M    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> AB12345-BR… AB12345    53.8       4 kg      <span style="color: #949494;">""</span>      id-42  BRA-1     36 M    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> AB12345-BR… AB12345    60.6       3 kg      <span style="color: #949494;">""</span>      id-65  BRA-1     25 F    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> AB12345-BR… AB12345    63.8       4 kg      <span style="color: #949494;">""</span>      id-93  BRA-1     34 F    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> AB12345-BR… AB12345   144.        3 kg      <span style="color: #949494;">""</span>      id-171 BRA-11    40 F    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> AB12345-BR… AB12345    76.9       3 kg      <span style="color: #949494;">""</span>      id-217 BRA-11    43 M    </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 390 more rows, 39 more variables: RACE &lt;fct&gt;, COUNTRY &lt;fct&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   DTHFL &lt;fct&gt;, INVID &lt;chr&gt;, INVNAM &lt;chr&gt;, ARM &lt;fct&gt;, ARMCD &lt;fct&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ACTARM &lt;fct&gt;, ACTARMCD &lt;fct&gt;, REGION1 &lt;fct&gt;, STRATA1 &lt;fct&gt;, STRATA2 &lt;fct&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   BMRKR1 &lt;dbl&gt;, BMRKR2 &lt;fct&gt;, ITTFL &lt;fct&gt;, SAFFL &lt;fct&gt;, BMEASIFL &lt;fct&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   BEP01FL &lt;fct&gt;, RANDDT &lt;date&gt;, TRTSDTM &lt;dttm&gt;, TRTEDTM &lt;dttm&gt;, EOSSTT &lt;fct&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   EOSDT &lt;date&gt;, EOSDY &lt;int&gt;, DCSREAS &lt;fct&gt;, DTHDT &lt;date&gt;, DTHCAUS &lt;fct&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   DTHCAT &lt;fct&gt;, LDDTHELD &lt;int&gt;, LDDTHGR1 &lt;fct&gt;, LSTALVDT &lt;date&gt;, …</span></span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="nest">
  <p>chevron is a part of the <strong>NEST</strong> and <a href="https://pharmaverse.org/" class="external-link"><strong>pharmaverse</strong></a>.</p>
</div>
<script type="text/javascript" src="../analytics.js"></script></footer>
</div>

  

  

  </body>
</html>
