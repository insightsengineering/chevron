# run works as expected for chevron_t object

    Code
      res
    Output
        MedDRA System Organ Class                                                           
          MedDRA Preferred Term                     A: Drug X    B: Placebo   C: Combination
                                    Grade            (N=134)      (N=134)        (N=132)    
        ————————————————————————————————————————————————————————————————————————————————————
        cl A.1                                                                              
          - Overall -                                                                       
                                    - Any Grade -   78 (58.2%)   75 (56.0%)     89 (67.4%)  
                                    Grade 1-2       78 (58.2%)   75 (56.0%)     89 (67.4%)  
                                    1               30 (22.4%)   27 (20.1%)     39 (29.5%)  
                                    2               48 (35.8%)   48 (35.8%)     50 (37.9%)  
          dcd A.1.1.1.1                                                                     
                                    - Any Grade -   50 (37.3%)   45 (33.6%)     63 (47.7%)  
                                    Grade 1-2       50 (37.3%)   45 (33.6%)     63 (47.7%)  
                                    1               50 (37.3%)   45 (33.6%)     63 (47.7%)  
          dcd A.1.1.1.2                                                                     
                                    - Any Grade -   48 (35.8%)   48 (35.8%)     50 (37.9%)  
                                    Grade 1-2       48 (35.8%)   48 (35.8%)     50 (37.9%)  
                                    2               48 (35.8%)   48 (35.8%)     50 (37.9%)  
        cl B.2                                                                              
          - Overall -                                                                       
                                    - Any Grade -   79 (59.0%)   74 (55.2%)     85 (64.4%)  
                                    Grade 1-2       30 (22.4%)   30 (22.4%)     33 (25.0%)  
                                    1               30 (22.4%)   30 (22.4%)     33 (25.0%)  
                                    Grade 3-4       49 (36.6%)   44 (32.8%)     52 (39.4%)  
                                    3               49 (36.6%)   44 (32.8%)     52 (39.4%)  
          dcd B.2.2.3.1                                                                     
                                    - Any Grade -   48 (35.8%)   54 (40.3%)     51 (38.6%)  
                                    Grade 1-2       48 (35.8%)   54 (40.3%)     51 (38.6%)  
                                    1               48 (35.8%)   54 (40.3%)     51 (38.6%)  
          dcd B.2.1.2.1                                                                     
                                    - Any Grade -   49 (36.6%)   44 (32.8%)     52 (39.4%)  
                                    Grade 3-4       49 (36.6%)   44 (32.8%)     52 (39.4%)  
                                    3               49 (36.6%)   44 (32.8%)     52 (39.4%)  
        cl D.1                                                                              
          - Overall -                                                                       
                                    - Any Grade -   79 (59.0%)   67 (50.0%)     80 (60.6%)  
                                    Grade 3-4       29 (21.6%)   25 (18.7%)     29 (22.0%)  
                                    3               29 (21.6%)   25 (18.7%)     29 (22.0%)  
                                    Grade 5         50 (37.3%)   42 (31.3%)     51 (38.6%)  
          dcd D.1.1.1.1                                                                     
                                    - Any Grade -   50 (37.3%)   42 (31.3%)     51 (38.6%)  
                                    Grade 5         50 (37.3%)   42 (31.3%)     51 (38.6%)  
          dcd D.1.1.4.2                                                                     
                                    - Any Grade -   48 (35.8%)   42 (31.3%)     50 (37.9%)  
                                    Grade 3-4       48 (35.8%)   42 (31.3%)     50 (37.9%)  
                                    3               48 (35.8%)   42 (31.3%)     50 (37.9%)  
        cl D.2                                                                              
          - Overall -                                                                       
                                    - Any Grade -   47 (35.1%)   58 (43.3%)     57 (43.2%)  
                                    Grade 1-2       47 (35.1%)   58 (43.3%)     57 (43.2%)  
                                    1               47 (35.1%)   58 (43.3%)     57 (43.2%)  
          dcd D.2.1.5.3                                                                     
                                    - Any Grade -   47 (35.1%)   58 (43.3%)     57 (43.2%)  
                                    Grade 1-2       47 (35.1%)   58 (43.3%)     57 (43.2%)  
                                    1               47 (35.1%)   58 (43.3%)     57 (43.2%)  
        cl B.1                                                                              
          - Overall -                                                                       
                                    - Any Grade -   47 (35.1%)   49 (36.6%)     43 (32.6%)  
                                    Grade 5         47 (35.1%)   49 (36.6%)     43 (32.6%)  
          dcd B.1.1.1.1                                                                     
                                    - Any Grade -   47 (35.1%)   49 (36.6%)     43 (32.6%)  
                                    Grade 5         47 (35.1%)   49 (36.6%)     43 (32.6%)  
        cl C.2                                                                              
          - Overall -                                                                       
                                    - Any Grade -   35 (26.1%)   48 (35.8%)     55 (41.7%)  
                                    Grade 1-2       35 (26.1%)   48 (35.8%)     55 (41.7%)  
                                    2               35 (26.1%)   48 (35.8%)     55 (41.7%)  
          dcd C.2.1.2.1                                                                     
                                    - Any Grade -   35 (26.1%)   48 (35.8%)     55 (41.7%)  
                                    Grade 1-2       35 (26.1%)   48 (35.8%)     55 (41.7%)  
                                    2               35 (26.1%)   48 (35.8%)     55 (41.7%)  
        cl C.1                                                                              
          - Overall -                                                                       
                                    - Any Grade -   43 (32.1%)   46 (34.3%)     43 (32.6%)  
                                    Grade 3-4       43 (32.1%)   46 (34.3%)     43 (32.6%)  
                                    4               43 (32.1%)   46 (34.3%)     43 (32.6%)  
          dcd C.1.1.1.3                                                                     
                                    - Any Grade -   43 (32.1%)   46 (34.3%)     43 (32.6%)  
                                    Grade 3-4       43 (32.1%)   46 (34.3%)     43 (32.6%)  
                                    4               43 (32.1%)   46 (34.3%)     43 (32.6%)  

# run works as expected for chevron_t object when auto_pre = FALSE

    Code
      res
    Output
                                                       A: Drug X    B: Placebo    C: Combination   All Patients
                                                        (N=134)       (N=134)        (N=132)         (N=400)   
        ———————————————————————————————————————————————————————————————————————————————————————————————————————
        Age (yr)                                                                                               
          n                                               134           134            132             400     
          Mean (SD)                                   33.8 (6.6)    35.4 (7.9)      35.4 (7.7)      34.9 (7.4) 
          Median                                         33.0          35.0            35.0            34.0    
          Min - Max                                   21.0 - 50.0   21.0 - 62.0    20.0 - 69.0     20.0 - 69.0 
        Age group (yr)                                                                                         
          n                                               134           134            132             400     
          <65                                         134 (100%)    134 (100%)     131 (99.2%)     399 (99.8%) 
          >=65                                             0             0           1 (0.8%)        1 (0.2%)  
        Sex                                                                                                    
          n                                               134           134            132             400     
          F                                           79 (59.0%)    82 (61.2%)      70 (53.0%)     231 (57.8%) 
          M                                           55 (41.0%)    52 (38.8%)      62 (47.0%)     169 (42.2%) 
        Ethnicity                                                                                              
          n                                               134           134            132             400     
          NOT REPORTED                                 6 (4.5%)      10 (7.5%)      11 (8.3%)       27 (6.8%)  
          HISPANIC OR LATINO                          15 (11.2%)    18 (13.4%)      15 (11.4%)      48 (12.0%) 
          NOT HISPANIC OR LATINO                      104 (77.6%)   103 (76.9%)    101 (76.5%)     308 (77.0%) 
          UNKNOWN                                      9 (6.7%)      3 (2.2%)        5 (3.8%)       17 (4.2%)  
        Race                                                                                                   
          n                                               134           134            132             400     
          ASIAN                                       68 (50.7%)    67 (50.0%)      73 (55.3%)     208 (52.0%) 
          BLACK OR AFRICAN AMERICAN                   31 (23.1%)    28 (20.9%)      32 (24.2%)      91 (22.8%) 
          WHITE                                       27 (20.1%)    26 (19.4%)      21 (15.9%)      74 (18.5%) 
          AMERICAN INDIAN OR ALASKA NATIVE             8 (6.0%)      11 (8.2%)       6 (4.5%)       25 (6.2%)  
          MULTIPLE                                         0         1 (0.7%)           0            1 (0.2%)  
          NATIVE HAWAIIAN OR OTHER PACIFIC ISLANDER        0         1 (0.7%)           0            1 (0.2%)  

# script_funs works as expected in interactive mode

    Code
      res
    Output
       [1] "# Edit Preprocessing Function."                                                                                                                                      
       [2] "pre_fun <- function(adam_db, ...) {"                                                                                                                                 
       [3] "  checkmate::assert_class(adam_db, \"dm\")"                                                                                                                          
       [4] ""                                                                                                                                                                    
       [5] "  new_format <- list("                                                                                                                                               
       [6] "    adae = list("                                                                                                                                                    
       [7] "      AEBODSYS = rule(\"No Coding Available\" = c(\"\", NA, \"<Missing>\")),"                                                                                        
       [8] "      AEDECOD = rule(\"No Coding Available\" = c(\"\", NA, \"<Missing>\")),"                                                                                         
       [9] "      ATOXGR = rule(\"No Grading Available\" = c(\"\", NA, \"<Missing>\"))"                                                                                          
      [10] "    )"                                                                                                                                                               
      [11] "  )"                                                                                                                                                                 
      [12] ""                                                                                                                                                                    
      [13] "  adam_db <- dunlin::reformat(adam_db, new_format, na_last = TRUE)"                                                                                                  
      [14] ""                                                                                                                                                                    
      [15] "  adam_db %>%"                                                                                                                                                       
      [16] "    dm_zoom_to(\"adae\") %>%"                                                                                                                                        
      [17] "    filter(.data$ANL01FL == \"Y\") %>%"                                                                                                                              
      [18] "    filter(.data$ATOXGR != \"No Grading Available\") %>%"                                                                                                            
      [19] "    mutate(ATOXGR = factor(.data$ATOXGR,"                                                                                                                            
      [20] "      levels = setdiff(levels(.data$ATOXGR), \"No Grading Available\")"                                                                                              
      [21] "    )) %>%"                                                                                                                                                          
      [22] "    dm_update_zoomed()"                                                                                                                                              
      [23] "}"                                                                                                                                                                   
      [24] ""                                                                                                                                                                    
      [25] "# Create TLG"                                                                                                                                                        
      [26] "tlg_output <- rlang::exec(.fn = pre_fun, adam_db = data, !!!args_ls) %>% \nrlang::exec(.fn = run, object = aet04_1, !!!args_ls, auto_pre = FALSE, check_arg = FALSE)"

